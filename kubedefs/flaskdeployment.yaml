apiVersion: apps/v1
kind: Deployment
metadata:
  name: appflask # deployment name
  labels:
    app: appflask # label for service
spec:
  replicas: 2
  selector:
    matchLabels:
      app: appflask  # each pdo that will have this selector will be a part of this deployment definition
  template:   # template of our pod
    metadata:
      labels:
        app: appflask
    spec:
      containers:
      - name: appflask
        image: luciancibu/flask-counter:1.0
        ports:
        - name: appflask-port
          containerPort: 5000
        envFrom:
        - configMapRef:
            name: configfile
        env:
        - name: DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: app-secret
              key: db-pass               